{"version":3,"file":null,"sources":["../src/lib/utils.js","../src/lib/operations.js","../src/index.js"],"sourcesContent":["import {WeakMap as InternalWeakMap} from 'weakmap';\n\nexport function createPrivates(){\n    return new InternalWeakMap();\n}\n\nexport const arrayFrom = (function(){\n    if(Array.from){\n        return Array.from;\n    }\n    return (a, mapper, thisArg)=>{\n        if(typeof mapper === 'function'){\n            return Array.prototype.slice.call(a).map(mapper, thisArg);\n        }else{\n            return Array.prototype.slice.call(a);\n        }\n    };\n}());\n\n//https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isNaN\nexport const internalIsNaN = (function(){\n    return Number.isNaN ? Number.isNaN : (value)=>{\n        return value !== value;\n    };\n}());\n","import isElement from 'iselement';\nimport {arrayFrom} from './utils';\n\nexport function indexOfElement(elements, element){\n    element = resolveElement(element, true);\n    if(!isElement(element)) return -1;\n    for(let i=0; i<elements.length; i++){\n        if(elements[i] === element){\n            return i;\n        }\n    }\n    return -1;\n}\n\nexport function hasElement(elements, element){\n    return -1 !== indexOfElement(elements, element);\n}\n\nexport function domListOf(arr){\n\n    if(!arr) return [];\n\n    try{\n        if(Object.prototype.toString(arr) === '[object Array]'){\n            return arr.map(resolveElement);\n        }else{\n            if(typeof arr.length === 'undefined'){\n                return [resolveElement(arr)];\n            }\n\n            return arrayFrom(arr, resolveElement);\n            /*let arrayFrom = Array.from;\n            if(typeof arrayFrom === 'function'){\n                return Array.from(arr, resolveElement);\n            }else{\n                return Array.prototype.slice.call(arr).map(resolveElement);\n            }*/\n\n        }\n    }catch(e){\n        throw new Error(e);\n    }\n\n}\n\nexport function concatElementLists(...lists){\n    return lists.reduce((last, list)=>{\n        return list.length ? last : last.concat(domListOf(list));\n    }, []);\n}\n\nexport function addElements(elements, ...toAdd){\n    return toAdd.map(resolveElement).forEach(e=>{\n        let index = indexOfElement(elements, e);\n\n        if(index === -1)\n            elements.push(e);\n    });\n}\n\nexport function removeElements(elements, ...toRemove){\n    return toRemove.map(resolveElement).reduce((last, e)=>{\n\n        let index = indexOfElement(elements, e);\n\n        if(index !== -1)\n            return last.concat(elements.splice(index, 1));\n        return last;\n    }, []);\n}\n\nexport function resolveElement(element, noThrow){\n    if(typeof element === 'string'){\n        try{\n            return document.querySelector(element);\n        }catch(e){\n            throw e;\n        }\n\n    }\n\n    if(!isElement(element) && !noThrow){\n        throw new TypeError(`${element} is not a DOM element.`);\n    }\n    return element;\n}\n","import {\n    indexOfElement,\n    hasElement,\n    domListOf,\n    concatElementLists,\n    addElements,\n    removeElements,\n    resolveElement\n} from './lib/operations';\n\nimport {createPrivates, arrayFrom, internalIsNaN} from './lib/utils';\n\nconst privates = createPrivates();\nconst _=inst=>privates.get(inst);\n\nexport function initDomFamily(context, arr){\n    const list = domListOf(arr);\n\n    privates.set(context, {\n        elements: list\n    })\n\n    Object.defineProperty(context, 'size', {\n        get: function(){\n            return _(context).elements.length;\n        }\n    });\n\n    context[Symbol ? Symbol.iterator : '@@iterator'] = function(){\n        let index = -1;\n        return {\n            next(){\n                if(++index === context.size){\n                    return {done: true};\n                }\n\n                return {done: false, value: _(context).elements[index]};\n            }\n        };\n    };\n\n    return arrayFrom(list);\n}\n\nexport function domFamilyMixin(proto){\n\n    proto.add = addMethod;\n    //Like delete\n    proto.remove = removeMethod;\n    //Special methods\n    promto.removeAll = removeAllMethod;\n    proto.indexOf = indexOfMethod;\n    proto.get = getMethod;\n    //Normal Set like operations\n    proto.values = valuesMethod;\n    proto.has = hasMethod;\n    proto.forEach = forEachMethod;\n    proto.delete = removeMethod;\n    proto.clear = removeAllMethod;\n\n    return proto;\n}\n\nexport function getMethod(index){\n    if(internalIsNaN(index)){\n        return arrayFrom(_(this).elements);\n    }\n\n    return _(this).elements[parseInt(index)];\n}\n\nexport function valuesMethod(){\n    return arrayFrom(_(this).elements);\n}\n\nexport function indexOfMethod(element){\n    return indexOfElement(_(this).elements, element);\n}\n\nexport function hasMethod(element){\n    return hasElement(_(this).elements, element);\n}\n\nexport function addMethod(...toAdd){\n    addElements(_(this).elements, ...toAdd);\n    return this;\n}\n\nexport function removeMethod(...toRemove){\n    return removeElements(_(this).elements, ...toRemove);\n}\n\nexport function removeAllMethod(){\n    let list = [];\n    let elements = _(this).elements;\n\n    if(!elements.length){\n        return list;\n    }\n\n    list = arrayFrom(elements);\n\n    _(this).elements = [];\n\n    return list;\n}\n\nexport function forEachMethod(cb, context){\n    return _(this).elements.forEach(cb, context || this);\n}\n\n\nexport * from './lib/operations';\n"],"names":["createPrivates","InternalWeakMap","arrayFrom","Array","from","a","mapper","thisArg","prototype","slice","call","map","internalIsNaN","Number","isNaN","value","indexOfElement","elements","element","resolveElement","isElement","i","length","hasElement","domListOf","arr","Object","toString","e","Error","concatElementLists","lists","reduce","last","list","concat","addElements","toAdd","forEach","index","push","removeElements","toRemove","splice","noThrow","document","querySelector","TypeError","privates","_","get","inst","initDomFamily","context","set","defineProperty","Symbol","iterator","size","done","domFamilyMixin","proto","add","addMethod","remove","removeMethod","removeAll","removeAllMethod","indexOf","indexOfMethod","getMethod","values","valuesMethod","has","hasMethod","forEachMethod","delete","clear","parseInt","cb"],"mappings":"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"}